# Bash-скрипты: начало
В его первой строке нужно указать, какую именно оболочку мы собираемся использовать. Нас интересует bash, поэтому первая строка файла будет такой:
```shell
#!/bin/bash
```

В других строках этого файла символ решётки используется для обозначения комментариев, которые оболочка не обрабатывает. Однако, первая строка — это особый случай, здесь решётка, за которой следует восклицательный знак (эту последовательность называют шебанг)

Команды оболочки отделяются знаком перевода строки. Вот как это выглядит:
```shell
#!/bin/bash
# This is a comment
pwd
whoami
```

Для запуска скрипта необходимо преобразовать скрипт в исполняемый файл. Для в этого в терминале выполняем команду:
```shell
chmod +x ./myscript
```

Теперь скрипт можно выполнить, набрав в командной строке:
```shell
./myscript
```

### Вывод текста
Для вывода текста в консоль Linux применяется команда echo:
```shell
echo "Hello World"
```

### Переменные
Существуют два типа переменных, которые можно использовать в bash-скриптах:
- Переменные среды
- Пользовательские переменные

Переменные среды содержат в себе некие системные данные, например домашняя директория текущего пользователя:
```shell
echo "Home for the current user is: $HOME"
```

В дополнение к переменным среды, bash-скрипты позволяют задавать и использовать в сценарии собственные переменные. Подобные переменные хранят значение до тех пор, пока не завершится выполнение сценария.

Как и в случае с системными переменными, к пользовательским переменным можно обращаться, используя знак доллара:
```shell
grade=5
person="Adam"
echo "$person is a good boy, he is in grade $grade"
```

### Подстановка команд
Bash-скрипт предоставляет возможность извлекать информацию из вывода команд и назначать её переменным.

Сделать это можно двумя способами:
- С помощью значка обратного апострофа «`»
- С помощью конструкции $()

Таким образом, сохранение вывода команды pwd в переменную mydir может выглядеть так:
```shell
mydir=`pwd`
mydir=$(pwd)
```

### Математические операции
Для выполнения математических операций в файле скрипта можно использовать конструкцию вида $((*операция*)):
```shell
var1=$(( 5 + 5 ))
var2=$(( $var1 * 2 ))
```

### Условный оператор
Условный оператор в bash реализуется следующим образом:
```shell
if команда
then
команды
elif команда
then
команды
else
команды
fi
```

Пример использования условного оператора:
```shell
user=anotherUser
if grep $user /etc/passwd
then
echo "The user $user Exists"
elif ls /home
then
echo "The user doesn’t exist but anyway there is a directory under /home"
else
echo "The user $user doesn’t exist"
fi
```

### Сравнение
В скриптах можно сравнивать числовые значения. Ниже приведён список соответствующих команд:
- n1 -eq n2 -- Возвращает истинное значение, если n1 равно n2.
- n1 -ge n2 -- Возвращает истинное значение, если n1больше или равно n2.
- n1 -gt n2 -- Возвращает истинное значение, если n1 больше n2.
- n1 -le n2 -- Возвращает истинное значение, если n1меньше или равно n2.
- n1 -lt n2 -- Возвращает истинное значение, если n1 меньше n2.
- n1 -ne n2 -- Возвращает истинное значение, если n1не равно n2.

В сценариях можно сравнивать и строковые значения. Вот список операторов:
- str1 = str2 -- Проверяет строки на равенство, возвращает истину, если строки идентичны.
- str1 != str2 -- Возвращает истину, если строки не идентичны.
- str1 < str2 -- Возвращает истину, если str1меньше, чем str2.
- str1 > str2 -- Возвращает истину, если str1больше, чем str2.
- -n str1 -- Возвращает истину, если длина str1больше нуля.
- -z str1 -- Возвращает истину, если длина str1равна нулю.

Пример выполнения операций сравнения:
```shell
#!/bin/bash
val1=text
val2="another text"
if [ $val1 \> $val2 ]
then
echo "$val1 is greater than $val2"
else
echo "$val1 is less than $val2"
fi
```

У операций сравнения строк есть определённые особенности:

1. Операторы «>» и «<» необходимо экранировать с помощью обратной косой черты, иначе скрипт будет работать неправильно, хотя сообщений об ошибках и не появится. Скрипт интерпретирует знак «>» как команду перенаправления вывода.

2. Чтобы скрипт работал без предупреждений, переменные, значения которых содержат более одного слова, стоит заключать в двойные кавычки:
```shell
val1=text
val2="another text"
if [ $val1 \> "$val2" ]
then
echo "$val1 is greater than $val2"
else
echo "$val1 is less than $val2"
fi
```

3. В командах сравнения прописные буквы меньше строчных, т.к. сравнение строк выполняется путём сравнения ASCII-кодов символов.

### Проверки файлов
Нижеприведённые команды позволяют проверять различные условия, касающиеся файлов:
- -d file -- Проверяет, существует ли файл, и является ли он директорией.
- -e file -- Проверяет, существует ли файл.
- -f file -- Проверяет, существует ли файл, и является ли он файлом.
- -r file -- Проверяет, существует ли файл, и доступен ли он для чтения.
- -s file -- Проверяет, существует ли файл, и не является ли он пустым.
- -w file -- Проверяет, существует ли файл, и доступен ли он для записи.
- -x file -- Проверяет, существует ли файл, и является ли он исполняемым.
- file1 -nt file2 -- Проверяет, новее ли file1, чем file2.
- file1 -ot file2 -- Проверяет, старше ли file1, чем file2.
- -O file -- Проверяет, существует ли файл, и является ли его владельцем текущий пользователь.
- -G file -- Проверяет, существует ли файл, и соответствует ли его идентификатор группы идентификатору группы текущего пользователя.

В качестве примера приведём скрипт, который для существующей директории выведет её содержимое:
```shell
mydir=/home/likegeeks
if [ -d $mydir ]
then
echo "The $mydir directory exists"
cd $ mydir
ls
else
echo "The $mydir directory does not exist"
fi
```