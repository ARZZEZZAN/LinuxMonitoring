# Bash-скрипты, часть 2: циклы
Оболочка bash поддерживает циклы for, которые позволяют организовывать перебор последовательностей значений. Вот какова базовая структура таких циклов:
```shell
for var in list
do
команды
done
```

Пожалуй, самый простой пример цикла for в bash-скриптах — это перебор списка значений:
```shell
for var in first "the second" third "I’ll do it"
do
echo "This is: $var"
done
```

Ещё один способ инициализации цикла for заключается в передаче ему списка, который является результатом работы некоей команды, например вывод содержимого файла:
```shell
file="myfile"
for var in $(cat $file)
do
echo " $var"
done
```

### Разделители полей
В последнем описанном примере, все элементы списка, внутри файла, разделены между собой пробелами, табуляцией или переносом строки.

Для указания разделителей полей, существует специальная переменная окружения, которая называется IFS (Internal Field Separator). По умолчанию оболочка bash считает разделителями полей следующие символы:
- Пробел
- Знак табуляции
- Знак перевода строки

Если bash встречает в данных любой из этих символов, он считает, что перед ним — следующее самостоятельное значение списка.

Переменную среды IFS можно временно изменить, например:
```shell
IFS=$'\n'
IFS=:
```

Теперь можно написать скрипт, который выведет содержимое файла построчно:
```shell
file="/etc/passwd"
IFS=$'\n'
for var in $(cat $file)
do
echo " $var"
done
```

Для вложенных циклов можно изменять переменную IFS, при этом внешний цикл продолжит работать с разделителем, заданным перед его началом. Вот, например, как выглядит обработка файла /etc/passwd:
```shell
IFS=$'\n'
for entry in $(cat /etc/passwd)
do
echo "Values in $entry –"
IFS=:
for value in $entry
do
echo " $value"
done
done
```

### Обход файлов, содержащихся в директории
Ещё один пример использования циклов - обход файлов в директории:
```shell
for file in /home/likegeeks/*
do
команды
fi
done
```

### Цикл while
Помимо цикла for, в bash можно использовать и цикл while, например:
```shell
var1=5
while [ $var1 -gt 0 ]
do
echo $var1
var1=$[ $var1 - 1 ]
done
```

### Циклы for в стиле C
В bash-скриптах можно использовать циклы for, описание которых выглядит очень похожим на циклы в стиле C, например:
```shell
for (( i=1; i <= 10; i++ ))
do
echo "number is $i"
done
```

В bash-скриптах есть команды break и continue, которые работают также, как и их аналоги в языке C. Использовать их можно не только в циклах for в стиле языка C, но и в обычных циклах for и while.

### Обработка вывода, выполняемого в цикле
Данные, выводимые в цикле, можно обработать, либо перенаправив вывод, либо передав их в конвейер. Делается это с помощью добавления команд обработки вывода после инструкции done.

Например, можно записать всё, что выводится в цикле, в файл:
```shell
for (( a = 1; a < 10; a++ ))
do
echo "Number is $a"
done > myfile.txt
```

Оболочка создаст файл myfile.txt и перенаправит в этот файл вывод конструкции for.